---
title: "rdra2.0"
---

# RDRA2.0で要件定義

## 説明に入る前に

当初 Amazon Affiliates Link Maker のコードを参考に、iHerb Affiliates Link Maker を作ろうと思っていましたが、あちらはManifest V2で、こちらはManifest V3。いくつか使えなくなっている手法やAPIがあり、移植は無理そうでした。

ここで気付いたのです。コードや構成要素のコピーが目的ではなく Amazon Affiliates Link Maker の機能や用途をコピーして iHerb Affiliates Link Maker を作ることが本来の目的でした。よって、その機能性について分析及び設計をした上で、Manifest V2で実現していたことをManifest V3で再現するのではなく iHerb Affiliates Link Maker で機能性を実現すればよいのです。

プログラマにありがちな行動傾向は「コードのルールに沿って作成すること」で、この本でも最初にTypeScriptのクラス定義ルールを説明し、DDDで分析設計しはじめてしまいましたが、本来はもっとシステムの周囲の事に気を配る必要がありました。というのも、DDDはモデリング手法なのでそれ以外のこと（RDRA2.0で言うところの４つのレイヤー）は視点を向けません。すると何が起こるのか。具体的な動作がイメージできている間は良いですが、抽象的な動作概要だけがモヤッと存在する場合はモデリングしづらくなると思います。もちろん、そういうアイデアをブレイクダウンしていくためにユビキタス言語による非エンジニアとのコミュニケーションが発生する訳ですが、そういう人材に恵まれた環境でない限り、深堀りしていく機会が豊富にあるわけではないと思います。

## RDRA2.0でのレイヤー

- システム価値
- システム外部環境
- システム境界
- システム

何を意図するかは RDRA2.0ハンドブック 参照

## 軽くレイヤーわけしてみる

- システム価値
    - iHerbの商品ページのスクロール位置に関わらず商品紹介URLが取得したい人が利用する
- システム外部環境
    - iHerb.comの商品ページのURLにユーザの紹介IDを追加した商品紹介URLを作ること
- システム境界
    - iHerb.comの商品ページのURLと、ユーザの紹介IDの２つがわかれば良い
- システム
    - iHerb.comの商品ページのURLにユーザの紹介IDを追加した商品紹介URLを作る
    - 毎回紹介IDを入力しなくても最初に１度定義してやれば、２度目以降はそれを再利用する
    - 商品紹介URLを任意にコピーしなくても、クリックひとつでクリップボードに保存する
    - 紹介IDが未定義だったり何らかのトラブルで再利用出来ないときは、TOK3230を紹介IDとして利用する

